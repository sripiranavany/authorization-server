2025-09-24 00:03:29 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-24 00:03:29 [SpringApplicationShutdownHook] INFO  o.h.t.s.i.SchemaDropperImpl$DelayedDropActionImpl - HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2025-09-24 00:03:29 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-09-24 00:03:29 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-09-24 00:04:07 [main] INFO  c.s.a.AuthorizationServerApplication - Starting AuthorizationServerApplication using Java 21.0.8 on HMS-LP-178 with PID 108748 (/hms/development/learn/Java/authorization-server/target/classes started by sripiranavan in /hms/development/learn/Java/authorization-server)
2025-09-24 00:04:07 [main] INFO  c.s.a.AuthorizationServerApplication - No active profile set, falling back to 1 default profile: "default"
2025-09-24 00:04:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-24 00:04:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 66 ms. Found 3 JPA repository interfaces.
2025-09-24 00:04:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 9000 (http)
2025-09-24 00:04:09 [main] INFO  o.a.c.core.AprLifecycleListener - An older version [1.2.35] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.38]
2025-09-24 00:04:09 [main] INFO  o.a.c.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.2].
2025-09-24 00:04:09 [main] INFO  o.a.c.core.AprLifecycleListener - APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-09-24 00:04:09 [main] INFO  o.a.c.core.AprLifecycleListener - APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-09-24 00:04:09 [main] INFO  o.a.c.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.13 30 Jan 2024]
2025-09-24 00:04:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-24 00:04:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-09-24 00:04:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-24 00:04:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1964 ms
2025-09-24 00:04:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-09-24 00:04:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-09-24 00:04:09 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:authdb'
2025-09-24 00:04:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-24 00:04:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-09-24 00:04:10 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-09-24 00:04:10 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2025-09-24 00:04:10 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-09-24 00:04:10 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties - === TOKEN CONFIGURATION LOADED ===
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties - Auth Code Expiration: 1 minutes
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties - Default Access Token Expiration: 30 minutes
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties - Default Refresh Token Expiration: 7 days
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties - Client-specific settings:
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties -   web-client: access=5min, refresh=1days
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties -   api-client: access=60min, refresh=1days
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties -   mobile-client: access=15min, refresh=1days
2025-09-24 00:04:13 [main] INFO  c.s.a.config.TokenProperties - =====================================
2025-09-24 00:04:13 [main] INFO  c.s.a.c.AuthorizationServerConfig - Configuring database-backed UserDetailsService
2025-09-24 00:04:13 [main] INFO  c.s.a.c.AuthorizationServerConfig - Found 3 client configurations in application.yml
2025-09-24 00:04:13 [main] INFO  c.s.a.c.AuthorizationServerConfig - Registering OAuth2 client: api-client with grant types: [client_credentials, refresh_token]
2025-09-24 00:04:13 [main] INFO  c.s.a.c.AuthorizationServerConfig - Successfully registered client: api-client with 0 redirect URIs
2025-09-24 00:04:13 [main] INFO  c.s.a.c.AuthorizationServerConfig - Registering OAuth2 client: web-client with grant types: [authorization_code, refresh_token]
2025-09-24 00:04:14 [main] INFO  c.s.a.c.AuthorizationServerConfig - Successfully registered client: web-client with 5 redirect URIs
2025-09-24 00:04:14 [main] INFO  c.s.a.c.AuthorizationServerConfig - Registering OAuth2 client: mobile-client with grant types: [password, refresh_token]
2025-09-24 00:04:14 [main] INFO  c.s.a.c.AuthorizationServerConfig - Successfully registered client: mobile-client with 2 redirect URIs
2025-09-24 00:04:14 [main] INFO  c.s.a.c.AuthorizationServerConfig - Registered 3 OAuth2 clients dynamically from application.yml
2025-09-24 00:04:14 [main] DEBUG o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource - Adding web access control expression [authenticated] for any request
2025-09-24 00:04:14 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x000070b11485c270@743f58c3 with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d359c69, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28f6a008, org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.AuthorizationServerContextFilter@4db45d, org.springframework.security.web.context.SecurityContextPersistenceFilter@643a73fa, org.springframework.security.web.header.HeaderWriterFilter@769a9b7a, org.springframework.web.filter.CorsFilter@71dfca65, org.springframework.security.web.authentication.logout.LogoutFilter@4425b6ed, org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationServerMetadataEndpointFilter@470ad01c, org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationEndpointFilter@b1f36e5, org.springframework.security.oauth2.server.authorization.web.NimbusJwkSetEndpointFilter@7d6a9d5e, org.springframework.security.oauth2.server.authorization.web.OAuth2ClientAuthenticationFilter@51d34f02, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2686a801, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7878459f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7fa86ddd, org.springframework.security.web.session.SessionManagementFilter@49741e80, org.springframework.security.web.access.ExceptionTranslationFilter@36696821, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@fd5c7f6, org.springframework.security.oauth2.server.authorization.web.OAuth2TokenEndpointFilter@630bd5e7, org.springframework.security.oauth2.server.authorization.web.OAuth2TokenIntrospectionEndpointFilter@2319c1e0, org.springframework.security.oauth2.server.authorization.web.OAuth2TokenRevocationEndpointFilter@e21d73]
2025-09-24 00:04:14 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b64921f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@439d649c, org.springframework.security.web.context.SecurityContextPersistenceFilter@1016b44e, org.springframework.security.web.header.HeaderWriterFilter@7b55f0a6, org.springframework.web.filter.CorsFilter@6e475994, org.springframework.security.web.authentication.logout.LogoutFilter@1fe37d27, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c6c93f8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38e88e13, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55a2f08b, org.springframework.security.web.session.SessionManagementFilter@3fc7abf6, org.springframework.security.web.access.ExceptionTranslationFilter@8de8b07, org.springframework.security.web.access.intercept.AuthorizationFilter@47cf922d]
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties - === TOKEN CONFIGURATION LOADED ===
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties - Auth Code Expiration: 1 minutes
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties - Default Access Token Expiration: 30 minutes
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties - Default Refresh Token Expiration: 7 days
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties - Client-specific settings:
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties -   web-client: access=5min, refresh=1days
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties -   api-client: access=60min, refresh=1days
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties -   mobile-client: access=15min, refresh=1days
2025-09-24 00:04:14 [main] INFO  c.s.a.config.TokenProperties - =====================================
2025-09-24 00:04:14 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-24 00:04:15 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-09-24 00:04:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 9000 (http) with context path ''
2025-09-24 00:04:15 [main] INFO  c.s.a.AuthorizationServerApplication - Started AuthorizationServerApplication in 8.878 seconds (JVM running for 9.419)
2025-09-24 00:04:15 [main] INFO  c.s.a.config.UserDataLoader - Starting user data loading process...
2025-09-24 00:04:15 [main] INFO  c.s.a.config.UserDataLoader - Database is empty. Loading users from YAML configuration...
2025-09-24 00:04:15 [main] INFO  c.s.a.config.UserDataLoader - Loading users from users.yml file...
2025-09-24 00:04:15 [main] INFO  c.s.a.service.UserService - Bulk creating 4 users
2025-09-24 00:04:16 [main] INFO  c.s.a.service.UserService - Successfully created 4 out of 4 users
2025-09-24 00:04:16 [main] INFO  c.s.a.config.UserDataLoader - Successfully loaded 4 users from users.yml into database
2025-09-24 00:04:16 [main] INFO  c.s.a.config.UserDataLoader - Created user: admin with roles: [ADMIN, USER]
2025-09-24 00:04:16 [main] INFO  c.s.a.config.UserDataLoader - Created user: api-user with roles: [USER]
2025-09-24 00:04:16 [main] INFO  c.s.a.config.UserDataLoader - Created user: service-account with roles: [SERVICE]
2025-09-24 00:04:16 [main] INFO  c.s.a.config.UserDataLoader - Created user: robi-operator with roles: [OPERATOR, USER]
2025-09-24 00:04:32 [http-nio-9000-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-24 00:04:32 [http-nio-9000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-09-24 00:04:32 [http-nio-9000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-09-24 00:04:32 [http-nio-9000-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/server/info
2025-09-24 00:04:32 [http-nio-9000-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Set SecurityContextHolder to empty SecurityContext
2025-09-24 00:04:32 [http-nio-9000-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-09-24 00:04:32 [http-nio-9000-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/server/info
2025-09-24 00:04:32 [http-nio-9000-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request
2025-09-24 00:04:42 [http-nio-9000-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /oauth2/token
2025-09-24 00:04:42 [http-nio-9000-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Set SecurityContextHolder to empty SecurityContext
2025-09-24 00:04:42 [http-nio-9000-exec-2] DEBUG o.s.s.o.s.a.w.OAuth2ClientAuthenticationFilter - Set SecurityContextHolder authentication to OAuth2ClientAuthenticationToken
2025-09-24 00:04:42 [http-nio-9000-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorized filter invocation [POST /oauth2/token] with attributes [authenticated]
2025-09-24 00:04:42 [http-nio-9000-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request
